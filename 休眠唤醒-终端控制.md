##  休眠、唤醒、--终端控制

>&emsp;&emsp;前言：在做《广告信发系统》时，有远程控制终端设备定时或者即时休眠、唤醒、截图、录屏、关机等等需求。由于我们拿到系统的签名，所以做起来相对要简单很多。不需要围绕SDK中的API进行功能实现了，而是可以直接使用ADB的命令的方式来实现功能。

一.在APP中获取system权限。


二.在代码中通过ProcessBuilder的方式执行命令。


        public static String exe(String[] args) {
            L.i("999", " = CommandUtils  exe 指令为 =  " + Arrays.toString(args));
            String result = "";
            ProcessBuilder processBuilder = new ProcessBuilder(args);
            Process process = null;
            InputStream errIs = null;
            InputStream inIs = null;
            try {
                ByteArrayOutputStream baos = new ByteArrayOutputStream();
                int read = -1;
                process = processBuilder.start();
                errIs = process.getErrorStream();
                while ((read = errIs.read()) != -1) {
                    baos.write(read);
                }
                baos.write('/'+'n');
                inIs = process.getInputStream();
                while ((read = inIs.read()) != -1) {
                    baos.write(read);
                }
                byte[] data = baos.toByteArray();
                result = new String(data);
            } catch (IOException e) {
                e.printStackTrace();
            } catch (Exception e) {
                e.printStackTrace();
            } finally {
                try {
                    if (errIs != null) {
                        errIs.close();
                    }
                    if (inIs != null) {
                        inIs.close();
                    }
                } catch (IOException e) {
                    e.printStackTrace();
                }
                if (process != null) {
                    process.destroy();
                }
            }
            L.i("999"," = 执行 CommandUtils exe 后的输出结果 = "+ result);
            return result;
        }
例如休眠：args参数是一个string[]型的对象。
    
    //    input keyevent 26         屏幕休眠  屏幕唤醒
        public static final String[] WAKE_LOCK_COMMAND = {"input", "keyevent", KeyEvent.KEYCODE_POWER + ""};
        
在exe方法参数中输入WAKE_LOCK_COMMAND后即可进行休眠、唤醒的切换操作。以此类推，我们可以以这种方式执行任意的ADB命令。例如延迟10S关机：

        //    sleep 10 && reboot -p     延时10S 然后 关机
        public static final String[] ALARM_POWER_OFF_10S = {"sleep", "10", "&&", "reboot", "-p"};
        
